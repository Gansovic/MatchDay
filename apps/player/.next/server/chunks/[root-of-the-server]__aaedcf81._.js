module.exports = {

"[project]/apps/player/.next-internal/server/app/api/auth/health/route/actions.js [app-rsc] (server actions loader, ecmascript)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/punycode [external] (punycode, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("punycode", () => require("punycode"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[project]/apps/player/src/lib/supabase/server-client.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

/**
 * Server-side Supabase client utilities for MatchDay
 * 
 * Proper Next.js 15 App Router + Supabase Cloud server-side authentication
 * Uses @supabase/ssr for consistent cookie-based authentication
 */ __turbopack_context__.s({
    "createAdminSupabaseClient": ()=>createAdminSupabaseClient,
    "createServerSupabaseClient": ()=>createServerSupabaseClient,
    "createUserSupabaseClient": ()=>createUserSupabaseClient,
    "getServerUser": ()=>getServerUser
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@supabase+ssr@0.7.0_@supabase+supabase-js@2.57.4/node_modules/@supabase/ssr/dist/module/index.js [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createServerClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@supabase+ssr@0.7.0_@supabase+supabase-js@2.57.4/node_modules/@supabase/ssr/dist/module/createServerClient.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@15.4.6_@babel+core@7.28.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/headers.js [app-route] (ecmascript)");
;
;
async function createServerSupabaseClient() {
    const cookieStore = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["cookies"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createServerClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createServerClient"])(("TURBOPACK compile-time value", "https://twkipeacdamypppxmmhe.supabase.co"), ("TURBOPACK compile-time value", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3a2lwZWFjZGFteXBwcHhtbWhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM1OTIsImV4cCI6MjA3MDg3OTU5Mn0.O8W36cCRgI07ZVsArbi-deRRDBJxpt0d7HioR3M9kx4"), {
        cookies: {
            getAll () {
                return cookieStore.getAll();
            },
            setAll (cookiesToSet) {
                try {
                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));
                } catch  {
                // The `setAll` method was called from a Server Component.
                // This can be ignored if you have middleware refreshing
                // user sessions.
                }
            }
        },
        cookieOptions: {
            name: 'matchday-auth',
            lifetime: 60 * 60 * 24 * 7,
            domain: undefined,
            path: '/',
            sameSite: 'lax'
        }
    });
}
function createUserSupabaseClient(request, response) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createServerClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createServerClient"])(("TURBOPACK compile-time value", "https://twkipeacdamypppxmmhe.supabase.co"), ("TURBOPACK compile-time value", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3a2lwZWFjZGFteXBwcHhtbWhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM1OTIsImV4cCI6MjA3MDg3OTU5Mn0.O8W36cCRgI07ZVsArbi-deRRDBJxpt0d7HioR3M9kx4"), {
        cookies: {
            getAll () {
                return request.cookies.getAll();
            },
            setAll (cookiesToSet) {
                // Set cookies in the response if available
                if (response) {
                    cookiesToSet.forEach(({ name, value, options })=>{
                        response.cookies.set(name, value, options);
                    });
                }
                // Also set in request for immediate use
                cookiesToSet.forEach(({ name, value })=>{
                    request.cookies.set(name, value);
                });
            }
        },
        cookieOptions: {
            name: 'matchday-auth',
            lifetime: 60 * 60 * 24 * 7,
            domain: undefined,
            path: '/',
            sameSite: 'lax'
        }
    });
}
function createAdminSupabaseClient() {
    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;
    if (!supabaseServiceKey) {
        throw new Error('Missing SUPABASE_SERVICE_ROLE_KEY environment variable');
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createServerClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createServerClient"])(("TURBOPACK compile-time value", "https://twkipeacdamypppxmmhe.supabase.co"), supabaseServiceKey, {
        cookies: {
            getAll () {
                return [];
            },
            setAll () {
            // Admin client doesn't need cookies
            }
        },
        auth: {
            persistSession: false,
            autoRefreshToken: false
        }
    });
}
async function getServerUser() {
    try {
        const supabase = await createServerSupabaseClient();
        const { data: { user }, error } = await supabase.auth.getUser();
        if (error || !user) {
            return null;
        }
        return user;
    } catch (error) {
        console.error('Error getting server user:', error);
        return null;
    }
}
}),
"[project]/packages/shared/src/utils.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s({
    "cn": ()=>cn
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$clsx$40$2$2e$1$2e$1$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$tailwind$2d$merge$40$3$2e$3$2e$1$2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/tailwind-merge@3.3.1/node_modules/tailwind-merge/dist/bundle-mjs.mjs [app-route] (ecmascript)");
;
;
function cn(...inputs) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$tailwind$2d$merge$40$3$2e$3$2e$1$2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["twMerge"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$clsx$40$2$2e$1$2e$1$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["clsx"])(inputs));
}
}),
"[project]/packages/shared/src/environment/validation.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

/**
 * Environment Validation Utility for MatchDay
 * 
 * Prevents database confusion by validating and clearly indicating
 * which environment (local/production) is currently active.
 */ __turbopack_context__.s({
    "createEnvironmentMiddleware": ()=>createEnvironmentMiddleware,
    "getDatabaseDisplayName": ()=>getDatabaseDisplayName,
    "getEnvironmentConfig": ()=>getEnvironmentConfig,
    "getEnvironmentDisplayName": ()=>getEnvironmentDisplayName,
    "isSafeForDestructiveOperations": ()=>isSafeForDestructiveOperations,
    "logEnvironmentStatus": ()=>logEnvironmentStatus,
    "validateEnvironment": ()=>validateEnvironment,
    "validateEnvironmentAtStartup": ()=>validateEnvironmentAtStartup
});
function validateEnvironment() {
    const errors = [];
    const warnings = [];
    // Get environment variables
    const supabaseUrl = ("TURBOPACK compile-time value", "https://twkipeacdamypppxmmhe.supabase.co");
    const supabaseAnonKey = ("TURBOPACK compile-time value", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3a2lwZWFjZGFteXBwcHhtbWhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM1OTIsImV4cCI6MjA3MDg3OTU5Mn0.O8W36cCRgI07ZVsArbi-deRRDBJxpt0d7HioR3M9kx4");
    const siteUrl = ("TURBOPACK compile-time value", "http://localhost:3000");
    const adminAppUrl = ("TURBOPACK compile-time value", "http://localhost:3001");
    const nodeEnv = ("TURBOPACK compile-time value", "development") || 'development';
    // Validate required variables
    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
    ;
    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
    ;
    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
    ;
    // Early return if critical variables missing
    if (errors.length > 0) {
        return {
            isValid: false,
            errors,
            warnings,
            config: null
        };
    }
    // Determine database type and environment characteristics
    const isLocal = supabaseUrl?.includes('localhost') || supabaseUrl?.includes('127.0.0.1') || false;
    const isRemote = !isLocal;
    const isDevelopment = nodeEnv === 'development';
    const isProduction = nodeEnv === 'production';
    const databaseType = isLocal ? 'local' : 'production';
    // Validate URL format
    try {
        new URL(supabaseUrl);
    } catch  {
        errors.push(`Invalid NEXT_PUBLIC_SUPABASE_URL format: ${supabaseUrl}`);
    }
    try {
        new URL(siteUrl);
    } catch  {
        errors.push(`Invalid NEXT_PUBLIC_SITE_URL format: ${siteUrl}`);
    }
    // Environment consistency checks
    if (isDevelopment && isRemote) {
        warnings.push('‚ö†Ô∏è  DEVELOPMENT mode is using PRODUCTION database - this may be intentional but verify!');
    }
    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
    ;
    // Database URL validation
    if (isLocal) {
        if (!supabaseUrl?.match(/localhost:5432\d/)) {
            warnings.push(`Local database URL doesn't match expected pattern (localhost:5432x): ${supabaseUrl}`);
        }
    } else {
        if (!supabaseUrl?.includes('.supabase.co')) {
            warnings.push(`Production database URL doesn't match expected Supabase pattern: ${supabaseUrl}`);
        }
    }
    // Create config object
    const config = {
        env: nodeEnv,
        supabaseUrl: supabaseUrl,
        supabaseAnonKey: supabaseAnonKey,
        siteUrl: siteUrl,
        isDevelopment,
        isProduction,
        isLocal,
        isRemote,
        databaseType,
        adminAppUrl
    };
    return {
        isValid: errors.length === 0,
        errors,
        warnings,
        config
    };
}
function getEnvironmentConfig() {
    const result = validateEnvironment();
    if (!result.isValid || !result.config) {
        throw new Error(`Invalid environment configuration:\n${result.errors.join('\n')}`);
    }
    return result.config;
}
function isSafeForDestructiveOperations() {
    try {
        const config = getEnvironmentConfig();
        return config.isDevelopment || config.isLocal;
    } catch  {
        return false;
    }
}
function getEnvironmentDisplayName() {
    try {
        const config = getEnvironmentConfig();
        if (config.isLocal) {
            return `üü¢ LOCAL (${config.env})`;
        } else {
            return `üî¥ PRODUCTION (${config.env})`;
        }
    } catch  {
        return '‚ùì UNKNOWN';
    }
}
function getDatabaseDisplayName() {
    try {
        const config = getEnvironmentConfig();
        const url = new URL(config.supabaseUrl);
        if (config.isLocal) {
            return `üè† Local Database (${url.host})`;
        } else {
            return `‚òÅÔ∏è  Production Database (${url.hostname})`;
        }
    } catch  {
        return '‚ùì Unknown Database';
    }
}
function logEnvironmentStatus() {
    const result = validateEnvironment();
    console.group('üîß Environment Configuration');
    if (result.config) {
        const config = result.config;
        console.log(`Environment: ${getEnvironmentDisplayName()}`);
        console.log(`Database: ${getDatabaseDisplayName()}`);
        console.log(`Site URL: ${config.siteUrl}`);
        if (config.adminAppUrl) {
            console.log(`Admin URL: ${config.adminAppUrl}`);
        }
        if (result.warnings.length > 0) {
            console.group('‚ö†Ô∏è  Warnings');
            result.warnings.forEach((warning)=>console.warn(warning));
            console.groupEnd();
        }
    }
    if (result.errors.length > 0) {
        console.group('‚ùå Errors');
        result.errors.forEach((error)=>console.error(error));
        console.groupEnd();
    }
    console.groupEnd();
}
function createEnvironmentMiddleware() {
    return ()=>{
        const result = validateEnvironment();
        if (!result.isValid) {
            throw new Error(`Environment validation failed:\n${result.errors.join('\n')}`);
        }
        // Log environment status in development
        if (result.config?.isDevelopment) {
            logEnvironmentStatus();
        }
    };
}
function validateEnvironmentAtStartup() {
    try {
        const middleware = createEnvironmentMiddleware();
        middleware();
        const config = getEnvironmentConfig();
        // Show prominent warning for production database usage
        if (config.isRemote && config.isDevelopment) {
            console.warn('\n' + '='.repeat(60));
            console.warn('‚ö†Ô∏è  WARNING: USING PRODUCTION DATABASE IN DEVELOPMENT!');
            console.warn(`Database: ${getDatabaseDisplayName()}`);
            console.warn('Make sure this is intentional!');
            console.warn('='.repeat(60) + '\n');
        }
    } catch (error) {
        console.error('\n' + '='.repeat(60));
        console.error('‚ùå ENVIRONMENT VALIDATION FAILED!');
        console.error(error instanceof Error ? error.message : String(error));
        console.error('='.repeat(60) + '\n');
        throw error;
    }
}
}),
"[project]/packages/shared/src/index.ts [app-route] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

/**
 * @matchday/shared
 *
 * Shared utilities and helpers for MatchDay monorepo
 */ __turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/packages/shared/src/utils.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$environment$2f$validation$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/packages/shared/src/environment/validation.ts [app-route] (ecmascript)");
;
;
}),
"[project]/packages/shared/src/index.ts [app-route] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/packages/shared/src/utils.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$environment$2f$validation$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/packages/shared/src/environment/validation.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/packages/shared/src/index.ts [app-route] (ecmascript) <locals>");
}),
"[project]/apps/player/src/lib/supabase/client.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

/**
 * Supabase Client Configuration for MatchDay
 * 
 * Proper Next.js 15 App Router + Supabase Cloud integration using @supabase/ssr
 * Handles client-side, server-side, and SSR authentication consistently
 * 
 * Includes environment validation to prevent database confusion
 */ __turbopack_context__.s({
    "clearAuthCookies": ()=>clearAuthCookies,
    "getAuthRedirectUrl": ()=>getAuthRedirectUrl,
    "getCurrentSession": ()=>getCurrentSession,
    "getCurrentUser": ()=>getCurrentUser,
    "isInvalidJWTError": ()=>isInvalidJWTError,
    "supabase": ()=>supabase,
    "validateSessionHealth": ()=>validateSessionHealth
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@supabase+ssr@0.7.0_@supabase+supabase-js@2.57.4/node_modules/@supabase/ssr/dist/module/index.js [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createBrowserClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@supabase+ssr@0.7.0_@supabase+supabase-js@2.57.4/node_modules/@supabase/ssr/dist/module/createBrowserClient.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/packages/shared/src/index.ts [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$environment$2f$validation$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/packages/shared/src/environment/validation.ts [app-route] (ecmascript)");
;
;
// Validate environment at startup to prevent database confusion
(0, __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$environment$2f$validation$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateEnvironmentAtStartup"])();
// Get validated environment configuration
const envConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$packages$2f$shared$2f$src$2f$environment$2f$validation$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getEnvironmentConfig"])();
const { supabaseUrl, supabaseAnonKey } = envConfig;
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$supabase$2b$ssr$40$0$2e$7$2e$0_$40$supabase$2b$supabase$2d$js$40$2$2e$57$2e$4$2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createBrowserClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createBrowserClient"])(supabaseUrl, supabaseAnonKey, {
    cookieOptions: {
        name: 'matchday-auth',
        lifetime: 60 * 60 * 24 * 7,
        domain: undefined,
        path: '/',
        sameSite: 'lax'
    }
});
async function getCurrentUser() {
    try {
        const { data: { user }, error } = await supabase.auth.getUser();
        if (error) {
            console.error('Error getting current user:', error);
            return null;
        }
        return user;
    } catch (error) {
        console.error('Unexpected error getting current user:', error);
        return null;
    }
}
async function getCurrentSession() {
    try {
        const { data: { session }, error } = await supabase.auth.getSession();
        if (error) {
            console.error('Error getting current session:', error);
            return null;
        }
        return session;
    } catch (error) {
        console.error('Unexpected error getting current session:', error);
        return null;
    }
}
function getAuthRedirectUrl(path = '/dashboard') {
    const baseUrl = ("TURBOPACK compile-time value", "http://localhost:3000") || 'http://localhost:3000';
    return `${baseUrl}${path}`;
}
function clearAuthCookies() {
    if (typeof document === 'undefined') return;
    // Clear all Supabase auth cookies
    const cookieNames = [
        'matchday-auth',
        'sb-access-token',
        'sb-refresh-token',
        'supabase-auth-token',
        'supabase.auth.token'
    ];
    cookieNames.forEach((cookieName)=>{
        // Clear cookie with various path and domain combinations
        const clearCookie = (domain, path = '/')=>{
            let cookieString = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path};`;
            if (domain) cookieString += ` domain=${domain};`;
            document.cookie = cookieString;
        };
        // Clear with different path/domain combinations
        clearCookie();
        clearCookie(undefined, '/');
        clearCookie(window.location.hostname);
        clearCookie(`.${window.location.hostname}`);
    });
    // Also clear localStorage auth items
    if (typeof localStorage !== 'undefined') {
        const keys = Object.keys(localStorage);
        keys.forEach((key)=>{
            if (key.includes('supabase') || key.includes('auth')) {
                localStorage.removeItem(key);
            }
        });
    }
    console.log('üßπ Cleared all authentication cookies and localStorage');
}
function isInvalidJWTError(error) {
    if (!error) return false;
    const message = error.message || error.toString();
    return message.includes('invalid JWT') || message.includes('signature is invalid') || message.includes('unable to parse or verify signature');
}
async function validateSessionHealth(session) {
    if (!session?.access_token) return false;
    try {
        // Try a simple authenticated request to validate the token
        const { data, error } = await supabase.auth.getUser();
        if (error && isInvalidJWTError(error)) {
            console.log('üö® Session health check failed: Invalid JWT detected');
            return false;
        }
        return !error && !!data.user;
    } catch (error) {
        if (isInvalidJWTError(error)) {
            console.log('üö® Session health check failed: Invalid JWT detected');
            return false;
        }
        return false;
    }
}
}),
"[project]/apps/player/src/app/api/auth/health/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

/**
 * Authentication Health Check API
 * 
 * Lightweight endpoint to validate authentication token health.
 * Used by frontend to ensure auth state consistency between client and server.
 */ __turbopack_context__.s({
    "GET": ()=>GET
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@15.4.6_@babel+core@7.28.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$player$2f$src$2f$lib$2f$supabase$2f$server$2d$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/player/src/lib/supabase/server-client.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$player$2f$src$2f$lib$2f$supabase$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/player/src/lib/supabase/client.ts [app-route] (ecmascript)");
;
;
;
async function GET(request) {
    try {
        console.log('üè• Auth health check requested');
        const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$player$2f$src$2f$lib$2f$supabase$2f$server$2d$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createUserSupabaseClient"])(request);
        const { data: { user }, error } = await supabase.auth.getUser();
        if (error) {
            console.log('üè• Auth health check - error:', error.message);
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$player$2f$src$2f$lib$2f$supabase$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isInvalidJWTError"])(error)) {
                return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                    isHealthy: false,
                    status: 'INVALID_TOKEN',
                    message: 'Authentication token is invalid or corrupted',
                    action: 'CLEAR_COOKIES_AND_REAUTH',
                    details: error.message
                }, {
                    status: 401
                });
            }
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                isHealthy: false,
                status: 'AUTH_ERROR',
                message: 'Authentication error occurred',
                action: 'RETRY_OR_REAUTH',
                details: error.message
            }, {
                status: 401
            });
        }
        if (!user) {
            console.log('üè• Auth health check - no user');
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                isHealthy: false,
                status: 'NO_USER',
                message: 'No authenticated user found',
                action: 'REDIRECT_TO_LOGIN'
            }, {
                status: 401
            });
        }
        console.log('üè• Auth health check - healthy:', user.email);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            isHealthy: true,
            status: 'HEALTHY',
            message: 'Authentication is valid',
            user: {
                id: user.id,
                email: user.email,
                emailVerified: !!user.email_confirmed_at
            },
            validatedAt: new Date().toISOString()
        });
    } catch (error) {
        console.error('üè• Auth health check - unexpected error:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_$40$babel$2b$core$40$7$2e$28$2e$4_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            isHealthy: false,
            status: 'VALIDATION_FAILED',
            message: 'Failed to validate authentication',
            action: 'RETRY_OR_REAUTH',
            details: error instanceof Error ? error.message : 'Unknown error'
        }, {
            status: 500
        });
    }
}
}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__aaedcf81._.js.map